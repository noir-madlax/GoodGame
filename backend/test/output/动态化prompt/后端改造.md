### README：品牌变量化 Prompt 使用说明（后端对接）

* 目标：在不改变结构化输出字段的前提下，按项目（品牌）注入变量，使“初筛”和“细致分析”两类 Prompt 动态适配不同品牌。
* 使用范围：两条“禁用状态”的变量化模板（固定 name）+ 一张品牌配置表。

### 渲染要点

* {{brand_name}} → 用于顶部“角色/背景说明/输出字段中的 brand 固定值”等位置。
* {{sector}} → 用于背景说明中该品牌所处业态描述，帮助模型“相关/疑似/无关”的边界判断。
* {{brand_aliases}} → 用于相关性判定说明区，建议渲染为“别名示例”或“请使用品牌词典命中判断”的提示文本；如需将数组展开为“/”分隔的字符串，可由后端在渲染前先构造：
* 例：brand_aliases_display = brand_aliases.join('/')
* 模板中使用 {{brand_aliases_display}}
* 若 brand_aliases 为空数组，模板中相关示例描述仍保留“按品牌词典命中判断”的文字，避免空文本导致模型困惑。

### 二、调用流程（后端）

* 步骤概览

1) 选定要调用的模板 name（初筛或细致分析）。
2) 选定品牌配置（通过 project_brand_settings.id 或 brand_name 唯一确定）。
3) 查询模板内容与品牌配置。
4) 构造渲染上下文 context：{ brand_name, sector, brand_aliases }
5) 对模板 content 执行占位符替换（建议 Mustache/Handlebars/EJS 等无逻辑模板引擎）。
6) 将渲染后的 Prompt 文本提供给大模型；输入数据按各自 Prompt 的输入规范组装；严禁更改输出字段名与结构。

* 模板名称（固定值）
* 初筛：PRELIMINARY_SCREENING_BRANDIZED
* 细致分析：ANALYZE_VIDEO_BRANDIZED
* 必填变量
* brand_name：品牌中文名
* sector：细分行业（如：火锅、轻食、咖啡）
* brand_aliases：字符串数组（可空数组）
