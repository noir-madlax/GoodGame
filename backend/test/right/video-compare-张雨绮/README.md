# 视频抄袭与搬运对比分析工具

## 项目概述

本工具用于对比分析两个视频，检测视频抄袭、搬运和二次创作行为。使用 Google Gemini 2.0 Flash 进行视频内容分析，并使用 Gemini 2.0 Flash Thinking 生成专业的 PDF 分析报告。

## 功能特性

- ✅ 自动上传视频到 Gemini File API
- ✅ 多维度视频相似度分析（内容、视觉、音频、时间结构）
- ✅ 修改检测（裁剪、镜像、变速、水印、调色等）
- ✅ 创作性评估
- ✅ 侵权风险评估
- ✅ 自动生成专业中文 PDF 报告

## 文件说明

### 核心脚本

1. **compare_videos.py** - 视频对比分析脚本
   - 使用 Gemini 2.0 Flash 进行视频分析
   - 自动计算最优采样率以控制 token 使用
   - 输出结构化的 JSON 分析结果

2. **generate_report.py** - PDF 报告生成脚本
   - 使用 Gemini 2.0 Flash Thinking 生成专业报告文本
   - 使用 ReportLab 生成中文 PDF 报告
   - 包含详细的数据表格和分析内容

### 视频文件

- **video1_original.mp4** - 原始视频（腾讯正版）
- **video2_suspected.mp4** - 疑似抄袭视频（B站搬运）

### 输出文件

位于 `output/` 目录：

- **video_comparison_analysis.json** - 完整的结构化分析结果
- **video_analysis_report.txt** - 中文报告文本
- **video_analysis_report.pdf** - 专业 PDF 报告

## 使用方法

### 1. 安装依赖

```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate

# 安装依赖
pip install google-genai reportlab
```

### 2. 配置环境变量

在项目根目录的 `.env` 文件中配置：

```bash
GEMINI_API_KEY_ANALYZE=your_api_key_here
```

### 3. 运行视频分析

```bash
source venv/bin/activate
python3 compare_videos.py
```

### 4. 生成 PDF 报告

```bash
source venv/bin/activate
python3 generate_report.py
```

## 分析结果

### 本次案例分析结果

**视频信息：**
- 原始视频: 腾讯正版-纯享版《心动的信号》（18.1分钟）
- 疑似抄袭视频: B站搬运版《心动的信号》（23.7分钟）

**相似度评分：**
- 内容相似度: **95/100**
- 视觉相似度: **90/100**
- 音频相似度: **85/100**
- 时间结构相似度: **92/100**

**侵权评估：**
- 综合相似度: **93/100**
- 风险等级: **CRITICAL（严重）**
- 风险评分: **95/100**

**结论：**
- 是否涉嫌抄袭: **是**
- 置信度: **HIGH（高）**
- 摘要: 疑似抄袭视频是一个明显的抄袭案例。多个维度上的高度相似性，加上缺乏实质性的创作投入，强烈表明疑似抄袭视频是原始视频未经授权的复制品。

### 关键发现

1. **内容层面**：场景、人物、对话、情节几乎完全相同
2. **视觉层面**：布景设计、摄像机角度、服装高度一致
3. **音频层面**：背景音乐、音效、对话节奏相同
4. **时间结构**：场景时长、事件顺序、节奏韵律一致

### 检测到的修改

- 轻微裁剪（可能为去除原始水印）
- 添加新的平台水印
- 细微的色彩分级调整

### 建议

1. 版权持有人应考虑采取法律行动保护知识产权
2. 疑似抄袭视频应从分发平台下架
3. 应向创作者发送停止侵权函

## 技术细节

### Token 使用优化

- 视频 1 时长: 1085 秒
- 视频 2 时长: 1425 秒
- 采样率: 1.0 fps
- 预计总 token 数: ~735,280

### 模型选择

- **分析模型**: gemini-2.0-flash-exp
  - 快速、高效
  - 支持长视频处理
  - 内置多模态理解能力

- **报告模型**: gemini-2.0-flash-thinking-exp
  - 深度思考能力
  - 专业报告撰写
  - 保留所有分析细节

## 注意事项

1. 视频文件名避免使用中文字符（API 上传限制）
2. 长视频会自动计算最优采样率
3. 如果 token 超限，可以降低采样率（如 0.5 fps）
4. 生成的报告使用中文字体，确保系统有支持的字体

## 许可证

本工具仅供内部使用，用于视频内容审核和版权保护。

## 更新日志

### 2025-11-05
- ✅ 初始版本完成
- ✅ 支持长视频分析（20分钟级别）
- ✅ 自动 token 优化
- ✅ 专业中文 PDF 报告生成
- ✅ 完整的侵权评估体系

