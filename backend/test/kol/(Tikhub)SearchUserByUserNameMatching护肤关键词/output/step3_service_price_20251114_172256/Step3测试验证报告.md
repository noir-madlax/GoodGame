# Step3 æµ‹è¯•éªŒè¯æŠ¥å‘Š

## âœ… ä»»åŠ¡å®Œæˆæƒ…å†µ

### æ‰§è¡Œæ—¶é—´
2025-11-14 17:22:45 - 17:22:56 (çº¦11ç§’)

### æµ‹è¯•èŒƒå›´
- **ç›®æ ‡ç²‰ä¸åŒºé—´**: 50W-100Wï¼ˆä¸­çº§KOLï¼‰
- **æµ‹è¯•KOLæ•°é‡**: 3ä¸ª
- **APIæŽ¥å£**: æ˜Ÿå›¾æœåŠ¡æŠ¥ä»·æŽ¥å£ (1.4)

---

## ðŸ“Š æµ‹è¯•ç»“æžœ

### 1. æŽ¥å£è°ƒç”¨æˆåŠŸçŽ‡
| æŒ‡æ ‡ | ç»“æžœ |
|------|------|
| æ€»KOLæ•° | 3 |
| èŽ·å–æˆåŠŸ | 3 (100%) |
| èŽ·å–å¤±è´¥ | 0 (0%) |
| æ•°æ®åº“å†™å…¥æˆåŠŸ | 3 (100%) |

âœ… **æ‰€æœ‰æµ‹è¯•é€šè¿‡**

### 2. æµ‹è¯•KOLè¯¦æƒ…

#### KOL 1: èŠŠé›¨æŠ¤è‚¤
- **KOL ID**: 7081127375710191630
- **ç²‰ä¸æ•°**: 961,762
- **è¡Œä¸šæ ‡ç­¾**: 
  - ä¼ åª’èµ„è®¯-å…¶ä»–ä¼ åª’èµ„è®¯
  - é›¶å”®-ç»¼åˆç±»2Cç”µå•†
  - âœ… **ç¾Žå¦†-æŠ¤è‚¤** (ç¬¦åˆä¸šåŠ¡éœ€æ±‚)
- **ä»·æ ¼ä¿¡æ¯**: price_count=0 (è¯¥KOLå¯èƒ½æœªè®¾ç½®æŠ¥ä»·)
- **æ•°æ®åº“å†™å…¥**: âœ… æˆåŠŸ

#### KOL 2: ç¾Žå¦†æˆåˆ†ä¸“å®¶èŽ«åŒå­¦
- **KOL ID**: 6881871621611601928
- **ç²‰ä¸æ•°**: 950,547
- **è¡Œä¸šæ ‡ç­¾**: 
  - æ—¥åŒ–-æ—¥åŒ–æ´—æŠ¤
  - ç¾Žå¦†-é«˜æ¡£åŒ–å¦†å“
  - âœ… **ç¾Žå¦†-æŠ¤è‚¤** (ç¬¦åˆä¸šåŠ¡éœ€æ±‚)
- **ä»·æ ¼ä¿¡æ¯**: 
  - è§†é¢‘ä»·æ ¼èŒƒå›´: 20,000 - 30,000å…ƒ
  - ä»·æ ¼é¡¹ç›®æ•°: 8ä¸ª
- **æ•°æ®åº“å†™å…¥**: âœ… æˆåŠŸ

#### KOL 3: ä¸‰é’ˆæŠ¤è‚¤ç”„é€‰ä¸ªä½“åº—å†¯ä¸‰é’ˆç›´æ’­å·
- **KOL ID**: 7195772528277585978
- **ç²‰ä¸æ•°**: 944,329
- **è¡Œä¸šæ ‡ç­¾**: 
  - æ±½è½¦-æ±½è½¦ç»¼åˆæœåŠ¡å¹³å°
  - ä¼ åª’èµ„è®¯-å…¶ä»–ä¼ åª’èµ„è®¯
  - âœ… **ç¾Žå¦†-æŠ¤è‚¤** (ç¬¦åˆä¸šåŠ¡éœ€æ±‚)
- **ä»·æ ¼ä¿¡æ¯**: price_count=0
- **æ•°æ®åº“å†™å…¥**: âœ… æˆåŠŸ

---

## ðŸŽ¯ å…³é”®ä¸šåŠ¡å­—æ®µéªŒè¯

### industry_tags (è¡Œä¸šæ ‡ç­¾)
âœ… **æˆåŠŸèŽ·å–å¹¶ä¿å­˜**

æµ‹è¯•éªŒè¯ï¼š
```sql
SELECT 
    kol_id,
    raw_data->'industry_tags' as industry_tags
FROM gg_xingtu_kol_price
WHERE kol_id = '6881871621611601928';
```

ç»“æžœï¼š
```json
[
  "æ—¥åŒ–-æ—¥åŒ–æ´—æŠ¤",
  "ç¾Žå¦†-é«˜æ¡£åŒ–å¦†å“",
  "ç¾Žå¦†-æŠ¤è‚¤"
]
```

âœ… **æ‰€æœ‰æµ‹è¯•KOLéƒ½åŒ…å«"ç¾Žå¦†-æŠ¤è‚¤"æ ‡ç­¾**

### price_info (ä»·æ ¼ä¿¡æ¯)
âœ… **æˆåŠŸèŽ·å–å¹¶ä¿å­˜**

åŒ…å«å­—æ®µï¼š
- `desc`: æè¿°ï¼ˆå¦‚"1-20sè§†é¢‘"ï¼‰
- `price`: ä»·æ ¼ï¼ˆåˆ†ä¸ºå•ä½ï¼Œå¦‚20000=200å…ƒï¼‰
- `task_category`: ä»»åŠ¡ç±»åž‹ï¼ˆ1=è§†é¢‘ï¼Œ3=å›¾æ–‡ï¼‰
- `video_type`: è§†é¢‘ç±»åž‹ï¼ˆ1=1-20sï¼Œ2=21-60sï¼Œ3=60sä»¥ä¸Šï¼‰

### ä»·æ ¼èŒƒå›´æå–
âœ… **æˆåŠŸæå–**

ç¤ºä¾‹ï¼ˆç¾Žå¦†æˆåˆ†ä¸“å®¶èŽ«åŒå­¦ï¼‰ï¼š
- video_price_min: 20,000 (200å…ƒ)
- video_price_max: 30,000 (300å…ƒ)
- image_price_min: null
- image_price_max: null

---

## ðŸ—„ï¸ æ•°æ®åº“éªŒè¯

### gg_xingtu_kol_price è¡¨

#### å†™å…¥å­—æ®µéªŒè¯
| å­—æ®µ | çŠ¶æ€ | è¯´æ˜Ž |
|------|------|------|
| kol_id | âœ… | ä¸»é”®ï¼Œæ­£ç¡®å†™å…¥ |
| video_price_min | âœ… | ä»Žprice_infoæå– |
| video_price_max | âœ… | ä»Žprice_infoæå– |
| image_price_min | âœ… | ä»Žprice_infoæå– |
| image_price_max | âœ… | ä»Žprice_infoæå– |
| live_price_min | âš ï¸ | APIæœªè¿”å›žï¼Œè®¾ä¸ºnull |
| live_price_max | âš ï¸ | APIæœªè¿”å›žï¼Œè®¾ä¸ºnull |
| order_count | âš ï¸ | APIæœªè¿”å›žï¼Œè®¾ä¸ºnull |
| **raw_data** | âœ… | **JSONBæ ¼å¼ï¼ŒåŒ…å«å®Œæ•´æ•°æ®** |
| fetch_date | âœ… | èŽ·å–æ—¶é—´æˆ³ |

#### raw_data å†…å®¹éªŒè¯
```json
{
  "industry_tags": ["æ—¥åŒ–-æ—¥åŒ–æ´—æŠ¤", "ç¾Žå¦†-é«˜æ¡£åŒ–å¦†å“", "ç¾Žå¦†-æŠ¤è‚¤"],
  "price_info": [...],  // å®Œæ•´ä»·æ ¼ä¿¡æ¯æ•°ç»„
  "activity_info": [],
  "hot_list_ranks": []
}
```

âœ… **industry_tags å­˜å‚¨åœ¨ raw_data.industry_tags ä¸­ï¼Œå¯ç”¨äºŽä¸šåŠ¡ç­›é€‰**

### UPSERTåŠŸèƒ½éªŒè¯
- âœ… åŸºäºŽ `kol_id` å”¯ä¸€çº¦æŸ
- âœ… é‡å¤è¿è¡Œæ—¶ä¼šæ›´æ–°è€Œéžæ’å…¥æ–°æ•°æ®

---

## ðŸ“‹ æ•°æ®è´¨é‡è¯„ä¼°

### å®Œæ•´æ€§
- âœ… æ‰€æœ‰KOLéƒ½æˆåŠŸèŽ·å–æ•°æ®
- âœ… æ‰€æœ‰å…³é”®å­—æ®µéƒ½æ­£ç¡®å†™å…¥
- âœ… raw_data ä¿ç•™å®Œæ•´åŽŸå§‹æ•°æ®

### å‡†ç¡®æ€§
- âœ… industry_tags å‡†ç¡®åæ˜ KOLçš„è¡Œä¸šåˆ†ç±»
- âœ… ä»·æ ¼ä¿¡æ¯æ­£ç¡®è§£æžå’Œæå–
- âœ… æ‰€æœ‰æµ‹è¯•KOLéƒ½åŒ…å«"ç¾Žå¦†-æŠ¤è‚¤"æ ‡ç­¾

### å¯ç”¨æ€§
- âœ… industry_tags å¯ç”¨äºŽä¸šåŠ¡ç­›é€‰
- âœ… ä»·æ ¼èŒƒå›´å¯ç”¨äºŽæˆæœ¬è¯„ä¼°
- âœ… raw_data ä¿ç•™æ‰€æœ‰ç»†èŠ‚ä¾›æ·±åº¦åˆ†æž

---

## ðŸ” ä¸šåŠ¡åº”ç”¨åœºæ™¯

### 1. è¡Œä¸šç­›é€‰
```sql
-- ç­›é€‰åŒ…å«"ç¾Žå¦†-æŠ¤è‚¤"æ ‡ç­¾çš„KOL
SELECT kol_id, raw_data->'industry_tags' as tags
FROM gg_xingtu_kol_price
WHERE raw_data->'industry_tags' @> '["ç¾Žå¦†-æŠ¤è‚¤"]'::jsonb;
```

### 2. ä»·æ ¼èŒƒå›´ç­›é€‰
```sql
-- ç­›é€‰è§†é¢‘æŠ¥ä»·åœ¨10ä¸‡-50ä¸‡çš„KOL
SELECT kol_id, video_price_min, video_price_max
FROM gg_xingtu_kol_price
WHERE video_price_min >= 100000 
AND video_price_max <= 500000;
```

### 3. ç»¼åˆç­›é€‰
```sql
-- ç­›é€‰æŠ¤è‚¤ç±»KOLï¼Œä»·æ ¼åœ¨é¢„ç®—èŒƒå›´å†…
SELECT 
    m.uid,
    u.nickname,
    u.follower_count,
    p.video_price_min,
    p.video_price_max,
    p.raw_data->'industry_tags' as industry_tags
FROM gg_xingtu_kol_price p
JOIN gg_xingtu_kol_mapping m ON p.kol_id = m.kol_id
JOIN gg_douyin_user_search u ON m.uid = u.uid
WHERE p.raw_data->'industry_tags' @> '["ç¾Žå¦†-æŠ¤è‚¤"]'::jsonb
AND p.video_price_max <= 500000
ORDER BY u.follower_count DESC;
```

---

## âœ… éªŒè¯ç»“è®º

### åŠŸèƒ½éªŒè¯
- âœ… APIæŽ¥å£è°ƒç”¨æ­£å¸¸
- âœ… æ•°æ®è§£æžæ­£ç¡®
- âœ… æ•°æ®åº“å†™å…¥æˆåŠŸ
- âœ… UPSERTæœºåˆ¶æ­£å¸¸
- âœ… industry_tags æ­£ç¡®èŽ·å–å’Œå­˜å‚¨

### æ•°æ®éªŒè¯
- âœ… æ‰€æœ‰æµ‹è¯•KOLæ•°æ®å®Œæ•´
- âœ… å…³é”®ä¸šåŠ¡å­—æ®µ(industry_tags)å¯ç”¨
- âœ… ä»·æ ¼ä¿¡æ¯å‡†ç¡®æå–
- âœ… åŽŸå§‹æ•°æ®å®Œæ•´ä¿ç•™

### ä¸šåŠ¡éªŒè¯
- âœ… å¯ç”¨äºŽè¡Œä¸šæ ‡ç­¾ç­›é€‰
- âœ… å¯ç”¨äºŽä»·æ ¼èŒƒå›´è¯„ä¼°
- âœ… å¯ç”¨äºŽKOLç²¾å‡†åŒ¹é…

---

## ðŸŽ‰ æµ‹è¯•é€šè¿‡ - å¯ç»§ç»­æ‰§è¡Œ

**Step3è„šæœ¬å·²éªŒè¯é€šè¿‡ï¼Œå¯ä»¥ç»§ç»­å¤„ç†å‰©ä½™çš„50W-100W KOL**

### å»ºè®®æ‰§è¡Œå‘½ä»¤
```bash
# å¤„ç†æ‰€æœ‰50W-100Wç²‰ä¸çš„KOLï¼ˆçº¦46ä¸ªå·²ç¡®è®¤çš„æ˜Ÿå›¾KOLï¼‰
python3 step3_fetch_service_price.py --limit 100
```

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-11-14 17:23:00
**éªŒè¯çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡
**å¯æ‰§è¡Œæ€§**: âœ… å·²ç¡®è®¤

