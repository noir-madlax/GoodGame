# KOL视频内容AI分析方案设计

## 一、分析目标

使用 **Gemini 2.5 Flash** 多模态模型分析KOL视频内容，从以下三个维度评估：

| 维度                        | 分析目标                     | 评估要点                     |
| --------------------------- | ---------------------------- | ---------------------------- |
| **维度1：形象与风格** | 博主美不美，家居风格是否高级 | 博主外形、家居软装、整体氛围 |
| **维度2：剪辑能力**   | 是否有多种不同剪辑风格       | 镜头语言、转场技巧、节奏把控 |
| **维度3：口播能力**   | 能否说清楚卖点               | 表达清晰度、卖点呈现、说服力 |

---

## 二、Gemini 2.5 Flash 能力边界

### 2.1 模型支持的输入

| 输入类型 | 支持情况    | 限制                            |
| -------- | ----------- | ------------------------------- |
| 视频文件 | ✅ 支持     | 单个视频最大1GB，时长无硬性限制 |
| 音频内容 | ✅ 支持     | 可分析视频中的音频（语音）      |
| 图片帧   | ✅ 自动提取 | 模型自动从视频中采样关键帧      |
| 文本辅助 | ✅ 支持     | 可配合元数据一起分析            |

### 2.2 模型适合的任务

- ✅ 视觉内容理解（场景、物体、人物）
- ✅ 视频风格分析（色调、构图、节奏）
- ✅ 语音内容理解（ASR + 语义分析）
- ✅ 多模态综合判断
- ⚠️ 细粒度剪辑技法分析（需要专业引导）

---

## 三、分析方案设计

### 3.1 维度1：形象与风格分析

#### 分析对象

- 博主出镜画面
- 家居环境背景
- 整体视觉氛围

#### 需要AI识别/判断的要素

| 要素类别           | 具体要素   | 判断标准                       |
| ------------------ | ---------- | ------------------------------ |
| **博主形象** | 面容清晰度 | 是否出镜、面容是否清晰可见     |
|                    | 妆容打扮   | 是否有精致妆容、穿搭是否用心   |
|                    | 气质表现   | 亲和力、专业感、生活感         |
| **家居风格** | 风格类型   | 温馨/现代/北欧/日式/中古/工业  |
|                    | 软装程度   | 是否以软装为主（布艺、装饰品） |
|                    | 整洁程度   | 空间是否整洁有序               |
| **视觉质感** | 色调风格   | 暖色/冷色/明亮/柔和            |
|                    | 画面质量   | 清晰度、光线是否充足           |

#### 输出结构设计

```json
{
  "dimension_1_style": {
    "blogger_appearance": {
      "is_on_camera": true,           // 是否出镜
      "appearance_score": 4,          // 1-5分
      "appearance_notes": "妆容精致，穿搭简约有品味"
    },
    "home_style": {
      "style_type": "现代温馨",        // 风格类型
      "is_soft_decoration": true,      // 是否软装为主
      "style_quality": "高级",         // 普通/较好/高级
      "style_notes": "以布艺和绿植为主，色调温暖"
    },
    "visual_quality": {
      "color_tone": "暖色调",
      "brightness": "明亮",
      "overall_score": 4              // 1-5分
    },
    "dimension_1_conclusion": "高级",  // 普通/较好/高级
    "dimension_1_summary": "博主形象良好，家居风格温馨高级，软装搭配得当"
  }
}
```

---

### 3.2 维度2：剪辑能力分析

#### 分析对象

- 镜头切换方式
- 转场效果运用
- 画面节奏感
- 特效/字幕运用

#### 需要AI识别/判断的要素

| 要素类别           | 具体要素   | 判断标准                    |
| ------------------ | ---------- | --------------------------- |
| **镜头语言** | 景别变化   | 是否有远景/中景/特写切换    |
|                    | 运镜技巧   | 是否有推拉摇移等运镜        |
|                    | 视角多样性 | 是否有多角度拍摄            |
| **转场技巧** | 转场类型   | 硬切/淡入淡出/遮罩/特效转场 |
|                    | 转场多样性 | 是否使用多种转场方式        |
|                    | 转场流畅度 | 转场是否自然不突兀          |
| **节奏把控** | 整体节奏   | 快节奏/中等/慢节奏          |
|                    | 节奏变化   | 是否有节奏的起伏变化        |
|                    | BGM配合    | 剪辑是否与音乐节奏匹配      |
| **后期效果** | 字幕运用   | 是否有字幕、字幕设计        |
|                    | 特效使用   | 贴纸、滤镜、动效            |

#### 输出结构设计

```json
{
  "dimension_2_editing": {
    "camera_work": {
      "shot_variety": true,           // 景别是否多样
      "camera_movement": true,        // 是否有运镜
      "angle_diversity": "丰富",      // 单一/一般/丰富
      "camera_notes": "有多角度展示，包含产品特写"
    },
    "transitions": {
      "transition_types": ["硬切", "淡入淡出", "遮罩转场"],
      "variety_score": 4,             // 1-5分
      "smoothness": "流畅",           // 生硬/一般/流畅
      "transition_notes": "转场方式多样，衔接自然"
    },
    "rhythm": {
      "pace_type": "中等偏快",        // 慢/中等/快
      "has_rhythm_variation": true,   // 是否有节奏变化
      "bgm_sync": true,               // 是否与BGM同步
      "rhythm_notes": "节奏感好，重点内容有慢放"
    },
    "post_effects": {
      "has_subtitles": true,
      "subtitle_quality": "精美",     // 无/简单/精美
      "effect_usage": "适度",         // 无/适度/过多
      "effect_notes": "字幕设计统一，有品牌感"
    },
    "dimension_2_conclusion": "多样",  // 单一/一般/多样
    "dimension_2_summary": "剪辑风格多样，镜头语言丰富，后期制作精良"
  }
}
```

---

### 3.3 维度3：口播能力分析

#### 分析对象

- 语音清晰度
- 表达逻辑性
- 卖点呈现
- 情感感染力

#### 需要AI识别/判断的要素

| 要素类别           | 具体要素   | 判断标准              |
| ------------------ | ---------- | --------------------- |
| **语音基础** | 发音清晰度 | 普通话是否标准清晰    |
|                    | 语速适中   | 是否太快或太慢        |
|                    | 音质音量   | 录音质量是否良好      |
| **表达能力** | 逻辑结构   | 是否有清晰的结构      |
|                    | 语言流畅   | 是否有过多停顿/口头禅 |
|                    | 用词准确   | 是否能准确描述产品    |
| **卖点呈现** | 卖点明确   | 是否清楚说明产品卖点  |
|                    | 场景带入   | 是否有使用场景描述    |
|                    | 痛点触达   | 是否提到用户痛点      |
| **感染力**   | 情绪状态   | 是否有热情/真诚感     |
|                    | 说服力     | 是否让人想购买        |
|                    | 亲和力     | 是否让人感到舒适      |

#### 输出结构设计

```json
{
  "dimension_3_speaking": {
    "voice_quality": {
      "clarity": "清晰",              // 模糊/一般/清晰
      "speed": "适中",                // 太快/适中/太慢
      "audio_quality": "良好",        // 差/一般/良好
      "voice_notes": "普通话标准，发音清晰"
    },
    "expression": {
      "logic_structure": true,        // 是否有结构
      "fluency": "流畅",              // 不流畅/一般/流畅
      "filler_words": "少",           // 多/一般/少
      "expression_notes": "表达有条理，先说问题再说解决方案"
    },
    "selling_points": {
      "points_clear": true,           // 卖点是否清晰
      "scenario_description": true,   // 是否有场景描述
      "pain_point_addressed": true,   // 是否触达痛点
      "points_list": ["材质柔软", "透气性好", "易清洗"],
      "selling_notes": "清楚说明了产品的三个核心卖点"
    },
    "persuasion": {
      "enthusiasm": "有热情",         // 平淡/有热情/过于激动
      "sincerity": "真诚",            // 做作/一般/真诚
      "persuasiveness_score": 4,      // 1-5分
      "persuasion_notes": "分享感强，像朋友推荐"
    },
    "dimension_3_conclusion": "优秀",  // 较弱/一般/优秀
    "dimension_3_summary": "口播能力优秀，表达清晰有逻辑，卖点呈现明确"
  }
}
```

---

## 四、分析执行策略

### 4.1 单视频分析流程

```
输入：视频文件 + 视频元数据(标题、互动数据等)
    ↓
Gemini 2.5 Flash 多模态分析
    ↓
输出：三维度结构化JSON
```

### 4.2 多视频综合分析

每位KOL分析5个视频后，需要综合评估：

```json
{
  "kol_id": "xxx",
  "kol_name": "xxx",
  "videos_analyzed": 5,
  "overall_assessment": {
    "style_consistency": "一致",      // 风格是否稳定
    "editing_variety": "丰富",        // 剪辑是否多样
    "speaking_stability": "稳定",     // 口播水平是否稳定
  
    "dimension_1_avg_score": 4.2,
    "dimension_2_avg_score": 3.8,
    "dimension_3_avg_score": 4.0,
  
    "overall_score": 4.0,
    "recommendation": "推荐合作",
    "summary": "博主整体内容质量较高，形象良好，剪辑多样，口播能力优秀"
  }
}
```

---

## 五、输入数据准备

### 5.1 每个视频需要准备的数据

| 数据类型    | 来源   | 用途                  |
| ----------- | ------ | --------------------- |
| 视频文件    | 下载   | 主要分析对象          |
| 视频标题    | 数据库 | 辅助理解内容主题      |
| 发布时间    | 数据库 | 判断内容时效性        |
| 互动数据    | 数据库 | 辅助判断内容质量      |
| 是否广告    | 数据库 | 区分自然内容/商业内容 |
| KOL基本信息 | 数据库 | 了解博主定位          |

### 5.2 Context 信息模板

```
## 视频背景信息
- KOL名称：{kol_name}
- KOL定位：{content_tags} - {feature_tags}
- 粉丝数量：{fans_count}
- 视频标题：{title}
- 发布时间：{publish_date}
- 视频类型：自然内容（非广告）
- 互动数据：点赞{like_num} 收藏{collect_num} 评论{comment_num}
```

---

## 六、特殊情况处理

### 6.1 纯图文博主

对于没有视频的KOL（如汤痴婆），调整分析策略：

| 维度            | 调整方案                   |
| --------------- | -------------------------- |
| 维度1：形象风格 | 分析图文封面和图片内容     |
| 维度2：剪辑能力 | 改为分析图文排版和视觉设计 |
| 维度3：口播能力 | 改为分析文案撰写能力       |

### 6.2 视频数量不足

对于非广告视频少于5个的KOL：

1. 分析所有可用的非广告视频
2. 补充1-2个商业合作视频（标注）
3. 在报告中注明样本量不足

---

## 七、评分体系设计

### 7.1 单维度评分

| 分数 | 等级 | 说明                         |
| ---- | ---- | ---------------------------- |
| 5分  | 优秀 | 该维度表现突出，超出预期     |
| 4分  | 良好 | 该维度表现较好，达到合作标准 |
| 3分  | 一般 | 该维度表现中等，需关注       |
| 2分  | 较弱 | 该维度存在明显不足           |
| 1分  | 很差 | 该维度严重不达标             |

### 7.2 综合评级

| 综合评分 | 推荐等级        | 合作建议 |
| -------- | --------------- | -------- |
| ≥4.0    | ⭐⭐⭐ 强烈推荐 | 优先合作 |
| 3.5-3.9  | ⭐⭐ 推荐       | 可以合作 |
| 3.0-3.4  | ⭐ 谨慎         | 需要观察 |
| <3.0     | 不推荐          | 暂不合作 |

---

## 八、Prompt设计（已完成）

### 8.1 System Prompt

```python
SYSTEM_PROMPT = """你是一位专业的小红书KOL内容分析专家，擅长从视频内容中分析博主的内容创作能力。

你的任务是观看这个视频，然后从以下三个维度进行专业分析：

## 分析维度

### 维度1：博主形象与家居风格
评估博主的外在形象和内容中展示的家居环境。

**重点关注：**
- 博主是否出镜？出镜时的形象如何？（妆容、穿搭、气质）
- 家居环境是什么风格？（温馨/现代/北欧/日式/中古/工业/其他）
- 装饰是以软装为主（布艺、装饰品、绿植）还是硬装为主（家具、装修）？
- 整体视觉感受是否高级、舒适、有品位？
- 色调是暖色还是冷色？明亮还是昏暗？
- 空间是否整洁有序？

**评分标准：**
- 5分：形象出众，家居风格高级温馨，软装品味佳，视觉效果极好
- 4分：形象良好，家居风格较好，有设计感
- 3分：形象普通，家居环境一般
- 2分：形象或环境有明显不足
- 1分：形象或环境较差

### 维度2：剪辑能力
评估视频的剪辑技术和视觉呈现能力。

**重点关注：**
- 镜头语言：是否有远景/中景/特写的变化？是否有运镜（推拉摇移）？
- 转场技巧：使用了哪些转场方式？（硬切/淡入淡出/遮罩/特效）转场是否流畅？
- 节奏把控：整体节奏是快还是慢？是否有节奏变化？是否与BGM配合？
- 后期效果：是否有字幕？字幕设计如何？是否使用了贴纸、滤镜、动效？
- 是否展示了多种不同的剪辑风格？

**评分标准：**
- 5分：剪辑专业，镜头语言丰富，转场多样流畅，节奏把控出色，后期精良
- 4分：剪辑较好，有一定技巧，整体流畅
- 3分：剪辑一般，基本达标，无明显问题
- 2分：剪辑简单，缺乏变化，有生硬感
- 1分：剪辑粗糙，影响观看体验

### 维度3：口播能力
评估博主的语言表达和内容呈现能力。

**重点关注：**
- 语音质量：普通话是否标准清晰？语速是否适中？音质是否良好？
- 表达能力：是否有清晰的逻辑结构？是否流畅无过多口头禅？
- 卖点呈现：是否清楚说明了产品/内容的核心卖点？是否有使用场景描述？是否触达用户痛点？
- 感染力：是否有热情和真诚感？是否有亲和力？是否具有说服力？

**评分标准：**
- 5分：口播专业，表达清晰有逻辑，卖点明确，感染力强，让人信服
- 4分：口播较好，表达流畅，卖点清晰
- 3分：口播一般，能说清楚但缺乏吸引力
- 2分：口播较弱，表达不清或缺乏感染力
- 1分：口播很差，影响内容理解

## 输出格式要求

请严格按照JSON格式输出分析结果（详见输出结构设计）。
"""
```

### 8.2 Context Prompt（动态生成）

```python
def create_analysis_prompt(video_metadata: Dict) -> str:
    context = f"""
## 视频背景信息

- **博主名称**: {video_metadata.get('kol_name', '未知')}
- **博主粉丝数**: {video_metadata.get('fans_count', 0):,}
- **视频标题**: {video_metadata.get('title', '无标题')}
- **视频正文**: {video_metadata.get('content', '无正文')[:500]}
- **发布时间**: {video_metadata.get('publish_date', '未知')}
- **是否为广告**: {'是' if video_metadata.get('is_advertise') else '否'}
- **互动数据**: 
  - 阅读: {video_metadata.get('read_num', 0):,}
  - 点赞: {video_metadata.get('like_num', 0):,}
  - 收藏: {video_metadata.get('collect_num', 0):,}
  - 评论: {video_metadata.get('comment_num', 0):,}

请观看上传的视频，结合以上背景信息，进行专业分析。
"""
    return context
```

---

## 九、测试结果（2025-12-10）

### 9.1 测试配置

- **模型**: Gemini 2.0 Flash (gemini-2.0-flash-exp)
- **温度**: 0.3
- **最大输出**: 4096 tokens

### 9.2 测试样本

| 视频 | 博主 | 标题 | 维度1 | 维度2 | 维度3 | 综合 |
|------|------|------|-------|-------|-------|------|
| #1 | 福宝麻麻育儿日记📚 | 产后脱发不是病❌❌附自救指南 | 4分 | 4分 | 4分 | 4.0 |
| #2 | 福宝麻麻育儿日记📚 | 家居神器🏠｜花小钱办大事 | 3分 | 3分 | 4分 | 3.3 |
| #3 | Unknown | (盲盒开箱) | 4分 | 3分 | 3分 | 3.3 |

### 9.3 分析质量评估

**优点：**
- ✅ 结构化输出稳定，JSON格式正确
- ✅ 三维度分析角度准确，覆盖需求
- ✅ 评分理由具体、有说服力
- ✅ 能识别视频中的软装、色调、剪辑风格
- ✅ 口播内容理解准确，卖点提取有效

**待观察：**
- ⚠️ 对复杂剪辑技法的识别深度
- ⚠️ 不同风格视频的一致性打分

---

## 十、脚本使用说明

### 10.1 准备数据

```bash
cd /Users/rigel/project/hdl-tikhub-goodgame/backend
source .venv/bin/activate

# 获取视频详情并下载
python "test/redbook/pillow-kol-analysis/内容/视频分析/01_脚本/prepare_video_data.py"
```

### 10.2 分析视频

```bash
# 分析单个视频
python "test/redbook/pillow-kol-analysis/内容/视频分析/01_脚本/analyze_video.py" --note-id <NOTE_ID>

# 测试模式（分析前3个）
python "test/redbook/pillow-kol-analysis/内容/视频分析/01_脚本/analyze_video.py" --test
```

---

*设计时间: 2025-12-10*
*更新时间: 2025-12-10*
*模型: Gemini 2.0 Flash (多模态)*
*测试状态: ✅ 已完成3个视频测试*
